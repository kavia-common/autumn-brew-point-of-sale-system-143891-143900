{"is_source_file": true, "format": "JavaScript/React JSX", "description": "This file defines a React component named PaymentsPage that manages the payment process within a point-of-sale system. It handles user interaction for selecting payment methods, initiating payments via integration with a Supabase backend, creating orders, inserting payment records, and providing user feedback on success or failure.", "external_files": ["../context/OrderContext", "../lib/supabaseClient"], "external_methods": ["useOrder", "getSupabase", "isSupabaseConfigured"], "published": ["PaymentsPage"], "classes": [], "methods": [{"name": "completePayment()", "description": "Handles the entire payment process including order creation, payment record insertion, feedback display, and ticket reset.", "scope": "PaymentsPage", "scopeKind": "function"}, {"name": "PaymentsPage()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["isSupabaseConfigured()", "createOrder()", "getSupabase()", "client.from('payments').insert()", "setLoading()", "setError()", "setSuccessMsg()", "newTicket()"], "search-terms": ["PaymentsPage", "React payment handling", "Supabase transaction", "order creation", "payment record"], "state": 2, "file_id": 23, "knowledge_revision": 71, "git_revision": "3509b20d23d2ea2ecb729dda72a74a61f146aa90", "revision_history": [{"50": ""}, {"71": "3509b20d23d2ea2ecb729dda72a74a61f146aa90"}], "ctags": [{"_type": "tag", "name": "PaymentsPage", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^export default function PaymentsPage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^        amount: Number(total.toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "PaymentsPage.completePayment.paymentPayload", "scopeKind": "class"}, {"_type": "tag", "name": "aria", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'card'}$/", "language": "JavaScript", "kind": "class", "scope": "PaymentsPage", "scopeKind": "class"}, {"_type": "tag", "name": "aria", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'cash'}$/", "language": "JavaScript", "kind": "class", "scope": "PaymentsPage", "scopeKind": "class"}, {"_type": "tag", "name": "aria", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'gift'}$/", "language": "JavaScript", "kind": "class", "scope": "PaymentsPage", "scopeKind": "class"}, {"_type": "tag", "name": "aria", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'other'}$/", "language": "JavaScript", "kind": "class", "scope": "PaymentsPage", "scopeKind": "class"}, {"_type": "tag", "name": "btn ${method === 'card' ? 'btn-primary' : ''}", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            className={`btn ${method === 'card' ? 'btn-primary' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.className", "scopeKind": "class"}, {"_type": "tag", "name": "btn ${method === 'cash' ? 'btn-primary' : ''}", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            className={`btn ${method === 'cash' ? 'btn-primary' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.className", "scopeKind": "class"}, {"_type": "tag", "name": "btn ${method === 'gift' ? 'btn-primary' : ''}", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            className={`btn ${method === 'gift' ? 'btn-primary' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.className", "scopeKind": "class"}, {"_type": "tag", "name": "btn ${method === 'other' ? 'btn-primary' : ''}", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            className={`btn ${method === 'other' ? 'btn-primary' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.className", "scopeKind": "class"}, {"_type": "tag", "name": "completePayment", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            onClick={completePayment}$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "completePayment", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^  async function completePayment() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "PaymentsPage", "scopeKind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            disabled={loading}$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.disabled", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'card'}$/", "language": "JavaScript", "kind": "property", "scope": "PaymentsPage.aria", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'cash'}$/", "language": "JavaScript", "kind": "property", "scope": "PaymentsPage.aria", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'gift'}$/", "language": "JavaScript", "kind": "property", "scope": "PaymentsPage.aria", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^            aria-pressed={method === 'other'}$/", "language": "JavaScript", "kind": "property", "scope": "PaymentsPage.aria", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^        method,$/", "language": "JavaScript", "kind": "field", "scope": "PaymentsPage.completePayment.paymentPayload", "scopeKind": "class"}, {"_type": "tag", "name": "order_id", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^        order_id: orderId,$/", "language": "JavaScript", "kind": "property", "scope": "PaymentsPage.completePayment.paymentPayload", "scopeKind": "class"}, {"_type": "tag", "name": "paymentPayload", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "pattern": "/^      const paymentPayload = {$/", "language": "JavaScript", "kind": "class", "scope": "PaymentsPage.completePayment", "scopeKind": "class"}], "hash": "120e06cf01132991f506806b2901360e", "format-version": 4, "code-base-name": "fall_cafe_pos_frontend", "filename": "fall_cafe_pos_frontend/src/pages/PaymentsPage.jsx", "fields": [{"name": "amount: Number(total.toFixed(2)),", "scope": "PaymentsPage.completePayment.paymentPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`btn ${method === 'card' ? 'btn-primary' : ''}`}", "scope": "PaymentsPage.className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`btn ${method === 'cash' ? 'btn-primary' : ''}`}", "scope": "PaymentsPage.className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`btn ${method === 'gift' ? 'btn-primary' : ''}`}", "scope": "PaymentsPage.className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`btn ${method === 'other' ? 'btn-primary' : ''}`}", "scope": "PaymentsPage.className", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={completePayment}", "scope": "PaymentsPage.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={loading}", "scope": "PaymentsPage.disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={method === 'card'}", "scope": "PaymentsPage.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={method === 'cash'}", "scope": "PaymentsPage.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={method === 'gift'}", "scope": "PaymentsPage.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={method === 'other'}", "scope": "PaymentsPage.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "method,", "scope": "PaymentsPage.completePayment.paymentPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "order_id: orderId,", "scope": "PaymentsPage.completePayment.paymentPayload", "scopeKind": "class", "description": "unavailable"}]}