{"is_source_file": true, "format": "JavaScript (JSX/React)", "description": "The file defines a React functional component 'MenuPage' that manages a menu system for a cafe POS application. It includes functionality to list, create, edit, archive/unarchive menu items, handle image uploads (with support for Supabase Storage), form validation, and user feedback mechanisms.", "external_files": ["../lib/supabaseClient"], "external_methods": ["getSupabase", "isSupabaseConfigured"], "published": ["default"], "classes": [], "methods": [{"name": "ensureBucket()", "description": "Ensures the 'menu-images' bucket exists in Supabase Storage, creating it if necessary.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "uploadImageAndGetPublicUrl(file, itemIdHint = 'new')", "description": "Uploads an image file to Supabase Storage and returns its public URL.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "validateCreate()", "description": "Performs client-side validation for creating new menu items.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "validateEdit(draft)", "description": "Validates the fields of a menu item edit draft.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "loadItems()", "description": "Fetches menu items from the 'menu_items' table in Supabase.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "createItem(e)", "description": "Handles the creation of a new menu item, including optional image upload.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "toggleActive(item)", "description": "Archives or unarchives a menu item by toggling its 'is_active' status.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "startInlineEdit(item)", "description": "Initiates inline editing mode for a specific menu item.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "cancelInlineEdit()", "description": "Cancels inline editing mode and resets related state.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "saveInlineEdit(id)", "description": "Validates and saves changes to a menu item, handling image uploads if needed.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "saveModalEdit()", "description": "Handles saving changes made via modal dialog for an item.", "scope": "MenuPage", "scopeKind": "function"}, {"name": "MenuPage()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabase()", "isSupabaseConfigured()", "client.storage.createBucket", "client.storage.from", "client.storage.getPublicUrl", "client.from", "client.storage.createBucket", "client.storage.from", "client.storage.getPublicUrl", "client.from", "client.from"], "search-terms": ["MenuPage", "Supabase menu_items", "Image upload to Supabase Storage", "Inline and modal editing", "Create menu item", "Archive/unarchive menu item", "Image URL validation", "React useMemo", "React useState", "React useEffect"], "state": 2, "file_id": 22, "knowledge_revision": 74, "git_revision": "42c882bcb71ff2303cfed5fa033009ccac517e61", "revision_history": [{"48": ""}, {"72": "3509b20d23d2ea2ecb729dda72a74a61f146aa90"}, {"73": "2b1dccc293f1023cc87a10cc903605174eb0920e"}, {"74": "42c882bcb71ff2303cfed5fa033009ccac517e61"}], "ctags": [{"_type": "tag", "name": "MenuPage", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^export default function MenuPage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "cancelInlineEdit", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  function cancelInlineEdit() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^                value={category}$/", "language": "JavaScript", "kind": "field", "scope": "MenuPage.value", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        category: category.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.createItem.payload", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        category: editDraft.category.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class"}, {"_type": "tag", "name": "createItem", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function createItem(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "ensureBucket", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function ensureBucket() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "imageUrl", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^                value={imageUrl}$/", "language": "JavaScript", "kind": "field", "scope": "MenuPage.value", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        image_url: finalImageUrl,$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.createItem.payload", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        image_url: finalImageUrl,$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        is_active: true,$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.createItem.payload", "scopeKind": "class"}, {"_type": "tag", "name": "loadItems", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function loadItems() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "loadingCreate", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^              disabled={loadingCreate}$/", "language": "JavaScript", "kind": "field", "scope": "MenuPage.disabled", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^                value={name}$/", "language": "JavaScript", "kind": "field", "scope": "MenuPage.value", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        name: editDraft.name.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        name: name.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.createItem.payload", "scopeKind": "class"}, {"_type": "tag", "name": "patch", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^      const patch = {$/", "language": "JavaScript", "kind": "class", "scope": "MenuPage.saveInlineEdit", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^      const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "MenuPage.createItem", "scopeKind": "class"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^                value={price}$/", "language": "JavaScript", "kind": "field", "scope": "MenuPage.value", "scopeKind": "class"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        price: Number(Number(editDraft.price).toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^        price: Number(Number(price).toFixed(2)),$/", "language": "JavaScript", "kind": "property", "scope": "MenuPage.createItem.payload", "scopeKind": "class"}, {"_type": "tag", "name": "saveInlineEdit", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function saveInlineEdit(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "saveModalEdit", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function saveModalEdit() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "startInlineEdit", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  function startInlineEdit(item) {$/", "language": "JavaScript", "kind": "function", "signature": "(item)", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "toggleActive", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function toggleActive(item) {$/", "language": "JavaScript", "kind": "function", "signature": "(item)", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "uploadImageAndGetPublicUrl", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  async function uploadImageAndGetPublicUrl(file, itemIdHint = 'new') {$/", "language": "JavaScript", "kind": "function", "signature": "(file, itemIdHint = 'new')", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "validateCreate", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  function validateCreate() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "MenuPage", "scopeKind": "function"}, {"_type": "tag", "name": "validateEdit", "path": "/home/kavia/workspace/code-generation/autumn-brew-point-of-sale-system-143891-143900/fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "pattern": "/^  function validateEdit(draft) {$/", "language": "JavaScript", "kind": "function", "signature": "(draft)", "scope": "MenuPage", "scopeKind": "function"}], "hash": "dc76c8abb1c3cf8b45a6e70a7e1be81c", "format-version": 4, "code-base-name": "fall_cafe_pos_frontend", "filename": "fall_cafe_pos_frontend/src/pages/MenuPage.jsx", "fields": [{"name": "value={category}", "scope": "MenuPage.value", "scopeKind": "class", "description": "unavailable"}, {"name": "category: category.trim(),", "scope": "MenuPage.createItem.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "category: editDraft.category.trim(),", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class", "description": "unavailable"}, {"name": "value={imageUrl}", "scope": "MenuPage.value", "scopeKind": "class", "description": "unavailable"}, {"name": "image_url: finalImageUrl,", "scope": "MenuPage.createItem.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "is_active: true,", "scope": "MenuPage.createItem.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={loadingCreate}", "scope": "MenuPage.disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "value={name}", "scope": "MenuPage.value", "scopeKind": "class", "description": "unavailable"}, {"name": "name: editDraft.name.trim(),", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class", "description": "unavailable"}, {"name": "name: name.trim(),", "scope": "MenuPage.createItem.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "value={price}", "scope": "MenuPage.value", "scopeKind": "class", "description": "unavailable"}, {"name": "price: Number(Number(editDraft.price).toFixed(2)),", "scope": "MenuPage.saveInlineEdit.patch", "scopeKind": "class", "description": "unavailable"}, {"name": "price: Number(Number(price).toFixed(2)),", "scope": "MenuPage.createItem.payload", "scopeKind": "class", "description": "unavailable"}]}